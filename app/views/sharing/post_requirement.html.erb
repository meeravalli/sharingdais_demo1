<%= javascript_include_tag "jquery.cookie.js" %>
<script>
  $(document).ready(function(){
    $("#foodshare_select_id").val("1");
    $("#bookshare_select_id ").val('2');
    <% if params[:post] == "book" %>
      $('#foodshare_form').hide();
      $('#bookshare_form').show();
    <% else %>
      $('#foodshare_form').show();
      $('#bookshare_form').hide();
    <% end %>
  $('.services_class').on('change', function() {
    if( $(this).val() == '1')
    {
       $(".error_explanation").html("");
       $('#bookshare_form').hide();
       $('#foodshare_form').show();
       $("#foodshare_select_id").val("1");
    }
    else if( $(this).val() == '2')
    {
      $(".error_explanation").html("");
      $('#bookshare_form').show();
      $('#foodshare_form').hide();
      $("#bookshare_select_id ").val('2');
    }

  });    

   $("input:checkbox[name=any]").click(function() {
      if ($("#any").is(":checked")) {
        $("#post_requirement_no_of_persons").attr('disabled', true);
        $("#post_requirement_no_of_persons").val('');
      }
      else {
        $("#post_requirement_no_of_persons").attr('disabled', false);
      }
			
    });
    $('#book_post_requirement_dop').datepicker({
      dateFormat: "yy-mm-dd",
      autoclose: true
    });

<% if !session[:any].blank? %>
      $("#post_requirement_no_of_persons").val('');
      $("#post_requirement_no_of_persons").attr('disabled', true);
      $("#any").attr('checked', true);
<% end %>

 if(document.getElementById('post_requirement_city_id').id){
			   	value = $.cookie('city_id')
					if(value){
            document.getElementById('post_requirement_city_id').value = value;
          }
        }
  if(document.getElementById('book_post_requirement_city_id').id){
          value = $.cookie('city_id')
          if(value){
            document.getElementById('book_post_requirement_city_id').value = value;
          }
        }

  });
function book_form_validate()
    {
       if($("#book_name").val() == "")
       {
         alert( "Please provide book name!" );
         return false;
       }
       if($("#author_name").val() == "")
       {
         alert( "Please provide your author name!" );
         return false;
       }
       return true;
    }

</script>
<p class="head light-tit">Post as Seeker</p>
<div class="form_inner_align" id='foodshare_form'>
  <%= form_for :post_requirement, :url => post_requirement_sharing_index_path, :html => {:class=>"form-horizontal"} do |f|%>
    <% if @post_requirement.errors.any? %>
		<div class="error_explanation">
      <ul>
        <% @post_requirement.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
			</div>
    <% end %>
    <div class="form-group">
      <label for="" class="">Service</label>
      <div class="">
        <%= f.collection_select(:service_id, @services, :id, :service_type, {selected: "1"}, {:class=>'form-control services_class', :id=> 'foodshare_select_id'} )%>
      </div>
    </div>
    <div class="form-group">
      <label for="" class="", id ="provider_id" >I'm Looking for<i>*</i></label>
      <div class="">
        <%= f.collection_select(:provider_id, @providers, :id, :provider_type, {:include_blank => 'Select Provider'}, {:class=>'form-control'} )%>
      </div>
    </div>
    <div class="form-group">
      <label for="" class="">Locality<i>*</i></label>
      <div class="">
			  <%= f.hidden_field :city_id %>
        <%= f.collection_select(:location_id, @locations, :id, :location_name, {:include_blank => 'Locality'}, {:class=>'form-control locality_id_class', :id => 'locality_id_food'} )%>
      </div>
    </div>
    <div class="form-group">
      <label for="inputEmail3" class="">Food Type<i>*</i></label>
      <div class="">
        <%= f.collection_select(:food_type_id, @food_types, :id, :name, {:include_blank => 'Select FoodType'}, {:class=>'form-control'} )%>
      </div>
    </div>
    <div class="form-group">
      <label for="inputEmail3" class="">Meal Type</label>
      <div class="">
        <%= f.collection_select(:meal_type_id, @meal_types, :id, :name, {:include_blank => 'Select MealType'}, {:class=>'form-control'} )%>
      </div>
    </div>
    <div class="form-group">
      <label for="inputEmail3" class="">Region specific</label>
      <div class="">
        <%= f.collection_select(:region_id, @regions, :id, :name, {:include_blank => 'Select Region'}, {:class=>'form-control'})%>
      </div>
    </div>
    <div class="form-group">
      <label for="inputEmail3" class="">No. of persons</label>
      <div class="">
        <%= f.text_field :no_of_persons, :size => 15, :class=>'form-control' %>
        <%= check_box_tag 'any',-1, false %> Any
      </div>
    </div>
    <div class="form-group">
      <label for="inputEmail3" class="">Budget range in Rs.</label>
      <div class="">
        <%= f.text_field :budget, :class=>'form-control', "required"=>"required"%>
      </div>
    </div>
    <div class="form-group">
      <label for="inputEmail3" class="">Details </label>
      <div class="">
        <%= f.text_area :details, :class=>'form-control', :rows  => 5, :cols=> 20  %>
      </div>
    </div>
    <div class="form-group" style ="visibility:hidden;">
      <label for="" class="">Food Seeker</label>
      <div class="">
        <%= f.radio_button :seeker_provider, true, :checked => true %> 
      </div>
    </div>
    <div class="form-group">
      <div class="">
        <%= f.submit 'Post Requirement', :class=>"btn btn-default"%>
      </div>
    </div>
  <%end%>
</div>

<div class="form_inner_align" id="bookshare_form" style="display:block;">
  <%= form_for BookPostRequirement.new, :url => post_book_requirement_sharing_index_path, :html => {:class=>"form-horizontal"} do |f|%>
    <% if @post_requirement.errors.any? %>
    <div class="error_explanation">
      <ul>
        <% @post_requirement.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
      </div>
    <% end %>
    <div class="form-group">
      <%= f.hidden_field :seeker_provider, value: true %>
      <label for="" class="">Service</label>
      <div class="">
        <%= f.collection_select(:service_id, @services, :id, :service_type, {selected: "2"}, {:class=>'form-control services_class', :id => 'bookshare_select_id'} )%>
      </div>
    </div>
    <div class="form-group">
      <label for="" class="">Locality<i>*</i></label>
      <div class="">
        <%= f.hidden_field :city_id %>
        <%= f.collection_select(:location_id, @locations, :id, :location_name, {:include_blank => 'Locality'}, {:class=>'form-control locality_id_class', :id => 'locality_id_book'} )%>
      </div>
    </div>
    <div class="form-group">
      <label for="inputEmail3" class="">Book Name<i>*</i></label>
      <div class="">
        <%= f.text_field :name, :class=>'form-control', :id=>"book_name" %>
      </div>
    </div>
    <div class="form-group">
      <label for="inputEmail3" class="">Author<i>*</i></label>
      <div class="">
        <%= f.text_field :author, :class=>'form-control', :id=>"author_name" %>
      </div>
    </div>
    <div class="form-group">
      <label for="inputEmail3" class="">ISBN Number</label>
      <div class="">
        <%= f.text_field :isbn_number, :class=>'form-control' %>
      </div>
    </div>
    <div class="form-group">
      <label for="inputEmail3" class="">Rent</label>
      <div class="">
        <%= f.text_field :rent, :class=>'form-control' %>
      </div>
    </div>
    <div class="form-group">
      <label for="inputEmail3" class="">Date of Posting </label>
      <div class="input-group date">
        <%= f.text_field :date_of_posting, :class=>'form-control', :id=>"book_post_requirement_dop"%>
        <span class="input-group-addon"><i class="glyphicon glyphicon-th" style="color: black;"></i> </span>
      </div>
    </div>
    <div class="form-group">
      <label for="inputEmail3" class="">Description </label>
      <div class="">
        <%= f.text_area :description, :class=>'form-control', :rows  => 5, :cols=> 20  %>
      </div>
    </div>
    <div class="form-group"></div>
    <div class="form-group">
      <div class="">
        <%= f.submit 'Post Requirement', :onclick => "return book_form_validate();", :class=>"btn btn-default"%>
      </div>
    </div>
  <%end%>
</div>
